<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>sharan yalburgi</title>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-yaml@4.1.0/dist/js-yaml.min.js"></script>
  <style type="text/tailwindcss">
    @theme {
      --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    }
    
    html {
      scrollbar-gutter: stable;
    }
    
    body {
      font-family: var(--font-sans);
      text-transform: lowercase;
      overflow-y: scroll;
    }
    
    /* Always visible scrollbar for webkit browsers */
    ::-webkit-scrollbar {
      width: 4px;
    }
    
    ::-webkit-scrollbar-track {
      background: rgba(0, 0, 0, 0.05);
    }
    
    ::-webkit-scrollbar-thumb {
      background-color: rgba(0, 0, 0, 0.3);
      border-radius: 0;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background-color: rgba(0, 0, 0, 0.5);
    }
    
    a {
      transition: color 0.2s;
    }
    
    button {
      transition: color 0.2s;
    }
    
    /* typography utilities */
    .text-body {
      @apply text-sm md:text-base font-light;
    }
    
    .text-secondary {
      @apply text-gray-800 font-light;
    }
    
    .text-muted {
      @apply text-gray-900 font-light;
    }
    
    .text-heading {
      @apply text-gray-700 font-light tracking-wide;
    }
    
    .text-link {
      @apply text-black font-light;
    }
    
    .text-link:hover {
      @apply text-gray-700;
    }
    
    button.text-link:hover {
      @apply text-gray-700;
    }
    
    .text-lead {
      @apply text-sm md:text-base leading-relaxed text-black font-light;
    }
    
    .text-caption {
      @apply text-xs md:text-sm text-gray-500 font-light;
    }
    
    .text-footer {
      @apply text-xs text-gray-600 font-light;
    }
    
    /* heading styles */
    h1 {
      @apply text-3xl md:text-4xl font-light tracking-tight mb-2;
    }
    
    h2 {
      @apply text-lg md:text-xl font-light text-gray-500 mb-6 tracking-wide;
    }
    
    h3 {
      @apply text-sm md:text-base font-light mb-1;
    }
    
    /* layout utilities */
    .section {
      @apply mb-16;
    }
    
    .container {
      @apply min-h-screen max-w-2xl mx-auto px-6 py-16 md:py-24;
    }
    
    .header {
      @apply mb-16;
    }
    
    .spacing-tight {
      @apply space-y-2;
    }
    
    .spacing-normal {
      @apply space-y-6;
    }
    
    .paragraph-spacing {
      @apply mb-4;
    }
    
    .posts-container {
      /* @apply overflow-y-scroll my-4 p-4;
      max-height: 15rem; */
      /* background: rgba(0, 0, 0, 0.02); */
    }
    
    /* Post detail overlay */
    .post-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: white;
      z-index: 1000;
      overflow-y: auto;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }
    
    .post-overlay.active {
      opacity: 1;
      pointer-events: all;
    }
    
    .post-title-moving {
      position: fixed;
      z-index: 1001;
      transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      pointer-events: none;
      @apply text-3xl md:text-4xl font-light tracking-tight mb-2 text-black;
      white-space: nowrap;
      opacity: 0;
      display: none;
    }
    
    .post-content {
      opacity: 0;
      transform: translateY(20px);
      transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
    }
    
    .post-content.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .post-close-btn {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      z-index: 1002;
      opacity: 0;
      transition: opacity 0.3s ease 0.6s;
    }
    
    .post-overlay.active .post-close-btn {
      opacity: 1;
    }
    
    /* Post item hover effects */
    .post-item {
      @apply transition-colors duration-200 rounded px-2 py-1 -mx-2 -my-1 cursor-pointer;
    }
    
    .post-item:hover {
      @apply bg-gray-50;
    }
  </style>
</head>
<body class="bg-white text-black antialiased">
  <main class="container">
    <header class="header">
      <p class="text-3xl md:text-4xl font-light tracking-tight mb-2 text-black">sharan yalburgi</p>
      <p class="text-secondary">ordering the chaos</p>
    </header>
    
    <section class="section">
      <p class="text-lead paragraph-spacing">
        building thoughtful software with attention to detail and user experience.
      </p>
      <p class="text-lead">
        interested in clean code, elegant solutions, and the craft of development.
      </p>
    </section>
    
    <section class="section">
      <div class="space-y-8 posts-container" id="posts-container">
        <!-- Posts will be loaded here dynamically -->
      </div>
    </section>
    
    <!-- Post Detail Overlay -->
    <div class="post-overlay" id="post-overlay">
      <button class="post-close-btn text-link focus:outline-none" onclick="closePost()">close</button>
      <div class="container">
        <header class="header">
          <h1 class="post-title-moving" id="post-title-moving"></h1>
        </header>
        <section class="section">
          <div class="post-content" id="post-content">
            <div id="post-content-text"></div>
          </div>
        </section>
      </div>
    </div>
    
    <section class="section">
      <div class="spacing-tight">
        <p class="text-body">
          <button onclick="showEmail()" class="text-link focus:outline-none" id="email-btn">email</button>
          <span id="email-container" class="ml-2 hidden">
            <button onclick="copyEmail()" class="text-muted underline text-xs focus:outline-none" id="copy-btn">sharanyalburgi@gmail.com</button>
            <span id="copied-msg" class="text-green-600 text-xs ml-1 hidden">copied!</span>
          </span>
        </p>
        <script>
          function showEmail() {
            document.getElementById('email-container').classList.remove('hidden');
            document.getElementById('email-btn').disabled = true;
          }
          function copyEmail() {
            const email = 'sharanyalburgi@gmail.com';
            navigator.clipboard.writeText(email);
            document.getElementById('copy-btn').textContent = email;
            document.getElementById('copied-msg').classList.remove('hidden');
            setTimeout(() => {
              document.getElementById('copied-msg').classList.add('hidden');
            }, 1200);
          }
        </script>
        
        <script>
          function openPost(event, linkElement) {
            event.preventDefault();
            
            const title = linkElement.getAttribute('data-title');
            const content = linkElement.getAttribute('data-content');
            const overlay = document.getElementById('post-overlay');
            const titleMoving = document.getElementById('post-title-moving');
            const contentDiv = document.getElementById('post-content');
            const contentText = document.getElementById('post-content-text');
            
            // Get the original position of the clicked link
            const rect = linkElement.getBoundingClientRect();
            const scrollY = window.scrollY;
            
            // Set initial position and content - start exactly where the link is
            titleMoving.textContent = title;
            titleMoving.style.left = rect.left + 'px';
            titleMoving.style.top = rect.top + 'px';
            titleMoving.style.width = rect.width + 'px';
            titleMoving.style.fontSize = window.getComputedStyle(linkElement).fontSize;
            titleMoving.style.opacity = '1';
            titleMoving.style.display = 'block';
            
            // Set content (support HTML)
            contentText.innerHTML = content;
            contentDiv.classList.remove('visible');
            
            // Show overlay (but keep it transparent initially)
            overlay.classList.add('active');
            
            // Force reflow to ensure initial styles are applied
            void titleMoving.offsetWidth;
            
            // Calculate target position (top of overlay container, matching header position)
            // Wait a moment for overlay to be visible, then calculate
            requestAnimationFrame(() => {
              const overlayContainer = overlay.querySelector('.container');
              const overlayHeader = overlay.querySelector('.header');
              const overlayContainerRect = overlayContainer.getBoundingClientRect();
              const overlayHeaderRect = overlayHeader.getBoundingClientRect();
              
              // Target position matches where the header title would be in overlay
              const targetTop = overlayHeaderRect.top;
              const targetLeft = overlayContainerRect.left + 24; // px-6 = 24px
              
              // Animate title to top
              requestAnimationFrame(() => {
                titleMoving.style.left = targetLeft + 'px';
                titleMoving.style.top = targetTop + 'px';
                titleMoving.style.width = 'auto';
                titleMoving.style.fontSize = ''; // Reset to use CSS classes
              });
            });
            
            // Animate content in after title animation starts
            setTimeout(() => {
              contentDiv.classList.add('visible');
            }, 300);
            
            // Scroll to top smoothly
            window.scrollTo({ top: 0, behavior: 'smooth' });
          }
          
          function closePost() {
            const overlay = document.getElementById('post-overlay');
            const titleMoving = document.getElementById('post-title-moving');
            const contentDiv = document.getElementById('post-content');
            
            // Hide content first
            contentDiv.classList.remove('visible');
            
            // Hide overlay and reset title
            setTimeout(() => {
              overlay.classList.remove('active');
              titleMoving.style.opacity = '0';
              setTimeout(() => {
                titleMoving.style.display = 'none';
                titleMoving.textContent = '';
              }, 300);
            }, 200);
          }
          
          // Load posts dynamically
          async function loadPosts() {
            const postsContainer = document.getElementById('posts-container');
            
            try {
              // Fetch the posts manifest
              const manifestResponse = await fetch('posts/posts.yaml');
              if (!manifestResponse.ok) {
                console.error('Failed to load posts manifest');
                return;
              }
              
              const yamlText = await manifestResponse.text();
              const postFiles = jsyaml.load(yamlText);
              const posts = [];
              
              // Fetch all post files in the order specified in posts.yaml
              for (let index = 0; index < postFiles.length; index++) {
                const filename = postFiles[index];
                // Skip files starting with "draft"
                const basename = filename.split('/').pop();
                if (basename.toLowerCase().startsWith('draft')) {
                  continue;
                }
                
                try {
                  const response = await fetch(`posts/${filename}`);
                  if (!response.ok) continue;
                  
                  const html = await response.text();
                  const parser = new DOMParser();
                  const doc = parser.parseFromString(html, 'text/html');
                  const scriptTag = doc.getElementById('post-data');
                  
                  if (scriptTag) {
                    const postData = JSON.parse(scriptTag.textContent);
                    // Use index from posts.json array as the order
                    posts.push({ ...postData, order: index, filename: basename });
                  }
                } catch (error) {
                  console.error(`Error loading post ${filename}:`, error);
                }
              }
              
              // Sort by order (which matches posts.yaml order)
              posts.sort((a, b) => a.order - b.order);
              
              // Render posts
              posts.forEach(post => {
                const postDiv = document.createElement('div');
                postDiv.className = 'post-item group';
                
                const link = document.createElement('a');
                link.href = '#';
                link.className = 'post-link text-link text-sm md:text-base font-light';
                link.setAttribute('data-title', post.title);
                link.setAttribute('data-content', post.content);
                link.textContent = post.title;
                
                const titleP = document.createElement('p');
                titleP.className = 'mb-1';
                titleP.appendChild(link);
                
                const captionP = document.createElement('p');
                captionP.className = 'text-caption';
                captionP.textContent = post.caption;
                
                postDiv.appendChild(titleP);
                postDiv.appendChild(captionP);
                postsContainer.appendChild(postDiv);
              });
              
              // Attach click handlers to all post items
              const postItems = document.querySelectorAll('.post-item');
              postItems.forEach(item => {
                item.addEventListener('click', (e) => {
                  const link = item.querySelector('.post-link');
                  if (link) {
                    openPost(e, link);
                  }
                });
              });
            } catch (error) {
              console.error('Error loading posts:', error);
            }
          }
          
          // Load posts when DOM is ready
          document.addEventListener('DOMContentLoaded', loadPosts);
        </script>
        <p class="text-body">
          <a href="https://github.com/sharanry" class="text-link" target="_blank" rel="noopener">github</a>
        </p>
        <p class="text-body">
          <a href="https://www.linkedin.com/in/sharanry/" class="text-link" target="_blank" rel="noopener">linkedin</a>
        </p>
      </div>
    </section>
    
    <footer class="text-footer">
      <p>Â© 2025</p>
    </footer>
  </main>
</body>
</html>
